<template name="newStudy">
  <h3 id="study-title">New study</h3>

  {{> SingleQuestionnaireNav}}

  <div class="col-sm-9 input-form">

    {{#autoForm collection="Studies" id="insertStudy" type="insert"}}

    <div class="panel panel-info">
      <div class="panel-heading">
        <h4>Study information</h4>
      </div>
      <div class="panel-body">
        <p class="instruction">Basic information of the new study. This information will be presented to participants upon joining your study.</p>

        {{> afQuickField name="title" template="bootstrap3-horizontal" label-class="col-sm-3" input-col-class="col-sm-9" placeholder="The title of your study "}}
        {{> afQuickField name="description" template="bootstrap3-horizontal" label-class="col-sm-3" input-col-class="col-sm-9" placeholder="A short description of your study"}}
        {{> afQuickField name="researcher_givenname"}}
        {{> afQuickField name="researcher_familyname"}}
        {{> afQuickField name="researcher_contact"}}
        {{> afQuickField name="user_id"}}
        {{> afQuickField name="createdAt"}}
      </div>

      <div class="panel-body">
                <p class="instruction">Database configuration. Where will the study data be stored?</p>

                    {{> afQuickField name="aware_database" template="bootstrap3" }}
                    
                    {{#if afFieldValueIs name="aware_database" value="no"}}
                        <div class="form-group" data-required="true">
                            <label class="col-sm-3 control-label" for="tf5rxAfpjq37xkFwE">Host / Server IP</label>
                            <div class="col-sm-9">
                                <input type="text" id="ip-input" value="nielsvanberkel.com" name="description" placeholder="e.g. 139.130.4.5" required="" data-schema-key="description" class="form-control">
                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group" data-required="true">
                            <label class="col-sm-3 control-label" for="tf5rxAfpjq37xkFwE">Database</label>
                            <div class="col-sm-9">
                                <input type="text" id="database-input" value="nielsvan_aware" name="description" placeholder="Database" required="" data-schema-key="description" class="form-control">
                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group" data-required="true">
                            <label class="col-sm-3 control-label" for="tf5rxAfpjq37xkFwE">Username</label>
                            <div class="col-sm-9">
                                <input type="text" id="username-input" value="nielsvan_awareuser" name="description" placeholder="Username" required="" data-schema-key="description" class="form-control">
                                <span class="help-block"></span>
                            </div>
                        </div>

                        <div class="form-group" data-required="true">
                            <label class="col-sm-3 control-label" for="tf5rxAfpjq37xkFwE">Password</label>
                            <div class="col-sm-9">
                                <input type="password" id="password-input" value="Aware123!" name="description" placeholder="Password" required="" data-schema-key="description" class="form-control">
                                <span class="help-block"></span>
                            </div>
                        </div>                                

                        <button type="button" class="btn btn-primary btn-md" id="btn-test-connection">Test connection</button>

                        <p id="connection_status">{{response}}</p>
                    {{/if}}

            </div>
        </div>

        <div>
            <button class="btn btn-primary btn-md pull-right" type=submit>Next step: questions</button>
        </div>
        {{/autoForm}}
    </div>
</template>
