<template name="studySensor">
    <h3 id="study-title">{{study.title}}</h3>
    {{> SingleQuestionnaireNav menuIdx="3"}}

    <div class="col-sm-9 input-form">

        {{#autoForm collection="Studies" id="updateSensors" type="update" doc=study}}

        <div class="panel panel-info">
            <div class="panel-heading">
                <h4>Sensors data</h4>
            </div>
            <div class="panel panel-body">
                <p class="instruction">Collect sensor data from the participants' phone during your study. Some sensors require specific permissions to be enabled on the phone. These are automatically requested when the study is joined. Keep in mind that the collection of multiple sensors at high frequency can decrease battery life of the phone.</p>
            </div>
        </div>

        <div class="panel panel-info">
            <div class="panel-heading">
                <h4>Configuration settings</h4>
            </div>

            <div class="panel panel-body">
                <div>
                    {{> afQuickField name="sensors.webservice_wifi_only" }}
                    <p class="instruction">Upload data only when connected to Wi-Fi.</p>

                    {{> afQuickField name="sensors.webservice_charging" }}
                    <p class="instruction">Upload only if charging.</p>

                    {{> afQuickField name="sensors.frequency_webservice" }}
                    <p class="instruction">How often the data is synchronised with the webservices (min)?</p>

                    {{> afQuickField name="sensors.frequency_clean_old_data" }}
                    <p class="instruction">How frequently to clean old data?</p>

                    {{> afQuickField name="sensors.webservice_silent" }}
                    <p class="instruction">Don't show sync notifications.</p>

                    {{> afQuickField name="sensors.fallback_network" }}
                    <p class="instruction">Fallback to 3G syncing after specified number of hours trying over WiFi.</p>

                    {{> afQuickField name="sensors.remind_to_charge" }}
                    <p class="instruction">Remind to charge when 15% battery is left.</p>

                    {{> afQuickField name="sensors.foreground_priority" }}
                    <p class="instruction">Recommended to keep AWARE running non-stop.</p>

                    {{> afQuickField name="sensors.frequency_sync_config" }}
                    <p class="instruction">How frequently to check for new study config (days)?</p>
                </div>
            </div>
        </div>

        <div class="panel panel-info">
            <div class="panel-heading">
                <h4>Software sensors</h4>
            </div>

            <div class="panel panel-body">
                <div>
                    {{> afQuickField name="sensors.status_applications" }}
                    <p class="instruction">Application usage and incoming notifications on the device.</p>

                    {{#if afFieldValueIs name="sensors.status_applications" value=true}}
                        <div class="col-md-offset-1">
                        {{> afQuickField name="sensors.status_notifications" }}
                        {{> afQuickField name="sensors.status_crashes" }}
                        </div>
                    {{/if}}

                    {{> afQuickField name="sensors.status_battery" }}
                    <p class="instruction">Battery information and power related events (phone shutting down, rebooting).</p>

                    {{> afQuickField name="sensors.status_communication_events" }}
                    <p class="instruction">Communication events such as calls and messages, performed by or received by the user.</p>

                    {{#if afFieldValueIs name="sensors.status_communication_events" value=true}}
                        <div class="col-md-offset-1">
                        {{> afQuickField name="sensors.status_calls" }}
                        {{> afQuickField name="sensors.status_messages" }}
                        </div>
                    {{/if}}

                    {{> afQuickField name="sensors.status_installations" }}
                    <p class="instruction">Application installations, removal, and updates.</p>


                    {{> afQuickField name="sensors.status_screen" }}
                    <p class="instruction">Smartphone screen status; turning on, turning off, lock, and unlock.</p>

                    {{> afQuickField name="sensors.status_telephony" }}
                    <p class="instruction">Information on the mobile phone capabilities of the device, connected cell towers, and neighboring towers.</p>
                </div>
            </div>
        </div>

        <div class="panel panel-info">
            <div class="panel-heading clearfix">
                <h4>Hardware sensors</h4>
            </div>

            <div class="panel panel-body">
                {{> afQuickField name="sensors.status_accelerometer" }}
                <p class="instruction">Acceleration applied to the device, including the force of gravity.</p>
                {{#if afFieldValueIs name="sensors.status_accelerometer" value=true}}
                    <div class="col-md-offset-1">
                        {{> afQuickField template="bootstrap3-horizontal" label-class="col-sm-6" input-col-class="col-sm-5" name="sensors.frequency_accelerometer" }}
                    </div>
                {{/if}}

                {{> afQuickField name="sensors.status_barometer" }}
                <p class="instruction">Ambient air pressure.</p>
                {{#if afFieldValueIs name="sensors.status_barometer" value=true}}
                    <div class="col-md-offset-1">
                        {{> afQuickField template="bootstrap3-horizontal" label-class="col-sm-6" input-col-class="col-sm-5" name="sensors.frequency_barometer" }}
                        <p class="instruction">Non-deterministic frequency in microseconds (dependent of the hardware sensor capabilities and resources), e.g., 200000 (normal), 60000 (UI), 20000 (game), 0 (fastest)</p>
                        {{> afQuickField template="bootstrap3-horizontal" label-class="col-sm-6" input-col-class="col-sm-5" name="sensors.threshold_barometer" }}
                        {{> afQuickField template="bootstrap3-horizontal" label-class="col-sm-6" input-col-class="col-sm-5" name="sensors.frequency_barometer_enforce" }}
                    </div>
                {{/if}}

                {{> afQuickField name="sensors.status_bluetooth" }}
                <p class="instruction">Smartphone's Bluetooth sensor and surrounding Bluetooth-enabled and visible devices. Includes respective RSSI dB values.</p>

                {{> afQuickField name="sensors.status_gravity" }}
                <p class="instruction">Force of gravity applied to the the device, provides a three dimensional vector indicating the direction and magnitude of gravity.</p>

                {{> afQuickField name="sensors.status_gyroscope" }}
                <p class="instruction">Rate or rotation in rad/s around a device’s x-, y-, and z-axis.</p>

                {{> afQuickField name="sensors.status_light" }}
                <p class="instruction">Level of ambient light.</p>

                {{> afQuickField name="sensors.status_linear_accelerometer" }}
                <p class="instruction">Acceleration applied to the device, excluding the force of gravity.</p>

                {{> afQuickField name="sensors.status_location_gps" }}
                <p class="instruction">Best location estimate of the users’ current location, based on an algorithm that results in minimum battery impact.</p>

                {{> afQuickField name="sensors.status_magnetometer" }}
                <p class="instruction">Geomagnetic field strength around the device.</p>

                {{> afQuickField name="sensors.status_network_events" }}
                <p class="instruction">Information on the network sensors availability of the device. These include use of airplane mode, Wi-Fi, Bluetooth, GPS, mobile, and WIMAX  status as well as internet availability.</p>

                {{> afQuickField name="sensors.status_processor" }}
                <p class="instruction">Processor load.</p>

                {{> afQuickField name="sensors.status_proximity" }}
                <p class="instruction">Distance to an object in front of the device.</p>

                {{> afQuickField name="sensors.status_rotation" }}
                <p class="instruction">Orientation of the device as a combination of an angle and an axis.</p>

                {{> afQuickField name="sensors.status_temperature" }}
                <p class="instruction">Ambient air temperature in Celsius (˚C). Not many devices have this sensor available.</p>

                {{> afQuickField name="sensors.status_wifi" }}
                <p class="instruction">The device’s Wi-Fi sensor, current AP, and surrounding Wi-Fi visible devices with respective RSSI dB values.
                </p>
            </div>
        </div>

        <div class="panel panel-info">
            <div class="panel-heading">
                <h4>Plugins</h4>
            </div>

            <div class="panel panel-body">
                <div>
                    <!--{{> afQuickField name="sensors.webservice_wifi_only" }}-->
                    <!--<p class="instruction">Upload data only when connected to Wi-Fi.</p>-->

                    <!--{{> afQuickField name="sensors.webservice_charging" }}-->
                    <!--<p class="instruction">Upload only if charging.</p>-->

                    <!--{{> afQuickField name="sensors.frequency_webservice" }}-->
                    <!--<p class="instruction">How often the data is synchronised with the webservices (min)?</p>-->

                    <!--{{> afQuickField name="sensors.frequency_clean_old_data" }}-->
                    <!--<p class="instruction">How frequently to clean old data?</p>-->

                    <!--{{> afQuickField name="sensors.webservice_silent" }}-->
                    <!--<p class="instruction">Don't show sync notifications.</p>-->

                    <!--{{> afQuickField name="sensors.fallback_network" }}-->
                    <!--<p class="instruction">Fallback to 3G syncing after specified number of hours trying over WiFi.</p>-->

                    <!--{{> afQuickField name="sensors.remind_to_charge" }}-->
                    <!--<p class="instruction">Remind to charge when 15% battery is left.</p>-->

                    <!--{{> afQuickField name="sensors.foreground_priority" }}-->
                    <!--<p class="instruction">Recommended to keep AWARE running non-stop.</p>-->

                    <!--{{> afQuickField name="sensors.frequency_sync_config" }}-->
                    <!--<p class="instruction">How frequently to check for new study config (days)?</p>-->
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-primary btn-md pull-right">Next step: overview</button> {{/autoForm}}
    </div>
</template>