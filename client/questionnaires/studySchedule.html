<template name="studySchedule">

      <h3 id="study-title">{{study.title}}</h3>

            {{> SingleQuestionnaireNav menuIdx="2"}}

            <div class="col-sm-9 input-form">

                {{#autoForm collection="Studies" id="updateSchedule" type="update" doc=study}}

                    {{#afEachArrayItem name="scheduler"}}
                        <div class="panel panel-info">
                            <div class="panel-heading clearfix">
                              <h4>Schedule {{incremented index}}</h4>
                              <button class="btn btn-danger btn-md autoform-remove-item align-right" data-autoform-field="items">Remove schedule</button>
                            </div>

                            <div class="panel-body">
                                <p class="instructions">It is possible to create different schedules and to assign different questions to each schedule.</p>

                                <h5>Questions included in schedule {{incremented index}}</h5>
                                  {{> afQuickField name=this.current.questionSchedule
                                          type ="select-checkbox"
                                          input-col-class="col-sm-12"
                                          options=questionsCheckbox
                                          value=questionsCheckbox
                                  }}

                                <h5>Schedule method</h5>
                                {{> afQuickField name=this.current.scheduleType}}

                                <hr>

                                {{#if afFieldValueIs name=this.current.scheduleType value="time"}}
                                    <h3>Hour</h3>
                                    {{> afQuickField name=this.current.hours
                                            template="bootstrap3-horizontal"
                                            input-col-class="col-sm-12"
                                    }}

                                    <h3>Weekday</h3>
                                    {{> afQuickField name=this.current.weekdays
                                            template="bootstrap3-horizontal"
                                            input-col-class="col-sm-11"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.scheduleType value="random"}}
                                    {{> afQuickField name=this.current.firsthour
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3"
                                            input-col-class="col-sm-9"
                                            value=8
                                    }}

                                    {{> afQuickField name=this.current.lasthour
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3"
                                            input-col-class="col-sm-9"
                                            value=20
                                    }}

                                    {{> afQuickField name=this.current.nrRandoms
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3"
                                            value="6"
                                            input-col-class="col-sm-9"
                                    }}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Number of notifications across the scheduled hour(s).</p>
                                    </div>

                                    {{> afQuickField name=this.current.interNotifTime
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3"
                                            input-col-class="col-sm-9"
                                            value="15"
                                    }}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Minimum time in-between two notifications (in minutes).</p>
                                    </div>
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.scheduleType value="interval"}}
                                    <h3>Interval</h3>
                                    {{> afQuickField name=this.current.interval
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-2"
                                            input-col-class="col-sm-8"
                                            placeholder="Triggered every X minutes"
                                    }}
                                {{/if}}
                            </div>
                        </div>
                    {{/afEachArrayItem}}

                    <div>
                        <button class="btn btn-primary btn-md autoform-add-item" data-autoform-field="scheduler">Add Schedule</button>
                        <button class="btn btn-primary btn-md pull-right" type="submit">Next</button>
                    </div>
                    <br>

                {{/autoForm}}
            </div>
</template>
