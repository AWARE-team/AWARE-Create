<template name="afObjectField_foo">
    <div>
        <h3 class="panel-title">{{this}}</h3>
    </div>
</template>

<template name="studyQuestion">

    <h3 id="study-title">{{study.title}}</h3>

    {{> SingleQuestionnaireNav menuIdx="1"}}

    <div class="col-sm-9 input-form">

        {{#autoForm collection="Studies" id="updateQuestion" type="update" doc=study}} 
        
        {{#afEachArrayItem name="questions"}}
       <div class="panel panel-info">

            <div class="panel-heading clearfix">
                <h4>Question {{incremented index}}</h4>
                <button class="btn btn-danger btn-md autoform-remove-item align-right" data-autoform-field="items" type="button">Remove question</button>
            </div>

            <div class="panel panel-body">
                {{> afQuickField name=(append this.name "title") template="bootstrap3-horizontal"
                                        label-class="col-sm-3" input-col-class="col-sm-9"
                                        placeholder="The actual question" }}

                {{> afQuickField name=(append this.name "instructions") template="bootstrap3-horizontal"
                                        label-class="col-sm-3" input-col-class="col-sm-9"
                                        placeholder="Any instructions for the participant(s)" }}

                {{> afQuickField name=(append this.name "type") template="bootstrap3-horizontal"
                                        label-class="col-sm-3" input-col-class="col-sm-9" }}

                {{#if afFieldValueIs name=(append this.name "type") value=1}}
                    <div class="col-sm-9 col-sm-offset-3">
                        <p class="instruction">Allows participants to enter text using the keyboard. Use when question answers are unable to be captured in a small set of choices.</p>
                    </div>

                    {{> afQuickField name=this.current.submit template="bootstrap3-horizontal"
                                        label-class="col-sm-3 col-sm-offset-3" input-col-class="col-sm-6"
                                        placeholder="Alternative submit button text" value="Submit" }}
                {{/if}}
            </div>
        </div>

        {{/afEachArrayItem}}

        <div>
            <button class="btn btn-primary btn-md autoform-add-item outside-form" data-autoform-field="questions" type="button">Add a new question</button>
            <button class="btn btn-primary btn-md pull-right" type="submit">Next step: schedule configuration</button>
        </div>

        {{/autoForm}}
    </div>
</template>