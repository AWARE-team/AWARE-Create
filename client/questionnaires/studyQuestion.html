<template name="studyQuestion">

            <h3 id="study-title">{{study.title}}</h3>

            {{> SingleQuestionnaireNav menuIdx="1"}}

            <div class="col-sm-9 input-form">

                {{#autoForm collection="Studies" id="updateQuestion" type="update" doc=study}}

                    {{#afEachArrayItem name="questions"}}

                        <div class="panel panel-info">

                            <div class="panel-heading clearfix">
                                <h4>Question {{incremented index}}</h4>

                                <button class="btn btn-danger btn-md autoform-remove-item align-right" data-autoform-field="items">Remove question</button>
                            </div>

                            <div class="panel panel-body">

                                {{> afQuickField name=this.current.question
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                        placeholder="The actual question"
                                }}

                                {{> afQuickField name=this.current.instructions
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                        placeholder="Any instructions for the participant(s)"
                                }}

                                {{> afQuickField name=this.current.type
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                }}

                                {{#if afFieldValueIs name=this.current.type value=1}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to enter text using the keyboard. Use when question answers are unable to be captured in a small set of choices.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=2}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to select only one option out of the presented possibilities.</p>
                                    </div>

                                    {{#afEachArrayItem name=this.current.options}}
                                        {{> afQuickField name=this.current.option
                                                template="bootstrap3-horizontal"
                                                label-class="col-sm-3 col-sm-offset-3"
                                                input-col-class="col-sm-5"
                                        }}
                                      <button class="btn btn-danger autoform-remove-item align-right" data-autoform-field="items">x</button>
                                    {{/afEachArrayItem}}

                                    <div class="col-sm-offset-6">
                                      <button class="btn btn-primary autoform-add-item" data-autoform-field="{{this.current.options}}">Add option</button>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=3}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to select multiple options out of the presented possibilities.</p>
                                    </div>

                                    {{#afEachArrayItem name=this.current.options}}
                                        {{> afQuickField name=this.current.option
                                                template="bootstrap3-horizontal"
                                                label-class="col-sm-3 col-sm-offset-3"
                                                input-col-class="col-sm-5"
                                        }}
                                      <button class="btn btn-danger autoform-remove-item align-right" data-autoform-field="items">x</button>
                                    {{/afEachArrayItem}}

                                    <div class="col-sm-offset-6">
                                      <button class="btn btn-primary autoform-add-item" data-autoform-field="{{this.current.options}}">Add option</button>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=4}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to indicate level of (dis)agreement with the question.</p>
                                    </div>

                                    {{> afQuickField name=this.current.maxValue
                                            type="select-radio-inline"
                                            options=likertMaxOptions
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                    }}
                                    {{> afQuickField name=this.current.minLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="(e.g., completely disagree)"
                                    }}
                                    {{> afQuickField name=this.current.maxLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="(e.g., completely agree)"
                                    }}
                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=5}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to quickly select one of the presented options.</p>
                                    </div>

                                    {{#afEachArrayItem name=this.current.options}}
                                        {{> afQuickField name=this.current.option
                                                template="bootstrap3-horizontal"
                                                label-class="col-sm-3 col-sm-offset-3"
                                                input-col-class="col-sm-5"
                                        }}
                                        <button class="btn btn-danger autoform-remove-item align-right" data-autoform-field="items">x</button>
                                    {{/afEachArrayItem}}

                                    <div class="col-sm-offset-6">
                                      <button class="btn btn-primary autoform-add-item" data-autoform-field="{{this.current.options}}">Add option</button>
                                    </div>
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=6}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to select any value between a set minimum and maximum.</p>
                                    </div>

                                    {{> afQuickField name=this.current.minValue
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Minimum value of the scale"
                                    }}
                                    {{> afQuickField name=this.current.maxValue
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Maximum value of the scale"
                                    }}
                                    {{> afQuickField name=this.current.minLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="(e.g., completely disagree)"
                                    }}
                                    {{> afQuickField name=this.current.maxLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="(e.g., completely agree)"
                                    }}
                                    {{> afQuickField name=this.current.stepSize
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Steps of increment while dragging the slider"
                                    }}
                                    {{> afQuickField name=this.current.scaleStart
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Intial scale value"
                                    }}
                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=7}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Allows participants to enter numeric only text.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{> afQuickField name=this.current.expiration_threshold
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                        value="0"
                                        placeholder="Question expiration time"
                                }}

                                <div class="col-sm-9 col-sm-offset-3">
                                    <p class="instruction">Close a question window after it has been open for a set amount of time (in seconds). Use 0 for unlimited answer time. If expiration time is higher than zero seconds, the questionnaire will be presented immediately as opposed to displaying a notification.</p>
                                </div>

                                {{> afQuickField name=this.current.notification_timeout
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                }}

                                <div class="col-sm-9 col-sm-offset-3">
                                    <p class="instruction">Dismiss the ESM notification after the specified time (in seconds).</p>
                                </div>

                                <div class="btn-toolbar mb-3" role="toolbar">
                        </div>

                        </div>
                    </div>
                    {{/afEachArrayItem}}
                    <br>

                    <div>
                        <button class="btn btn-primary btn-md autoform-add-item" data-autoform-field="questions">Add question</button>
                        <button class="btn btn-primary btn-md pull-right" type="submit" >Next</button>
                    </div>

                {{/autoForm}}
            </div>
</template>
