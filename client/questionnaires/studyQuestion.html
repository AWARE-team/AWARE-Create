<template name="studyQuestion">

            <h3 id="study-title">{{study.title}}</h3>

            {{> SingleQuestionnaireNav menuIdx="1"}}

            <div class="col-sm-9 input-form">

                {{#autoForm collection="Studies" id="updateQuestion" type="update" doc=study}}

                    {{#afEachArrayItem name="questions"}}

                        <div class="panel panel-info">

                            <div class="panel-heading clearfix">
                                <h4>Question {{this.name}}</h4>

                                <button class="btn btn-danger btn-md autoform-remove-item align-right" data-autoform-field="items">Remove question</button>
                            </div>

                            <div class="panel panel-body">

                                {{> afQuickField name=this.current.question
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                        placeholder="The actual question"
                                }}

                                {{> afQuickField name=this.current.instructions
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                        placeholder="Any instructions for the participant(s)"
                                }}

                                {{> afQuickField name=this.current.timeout
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                        value="0"
                                        placeholder="Question expiration time"
                                }}

                                <div class="col-sm-9 col-sm-offset-3">
                                    <p class="instruction">Expiry time (in seconds?) allows you to automatically dismiss a question after a set amount of time. Use 0 for unlimited answer time.</p>
                                </div>

                                {{> afQuickField name=this.current.type
                                        template="bootstrap3-horizontal"
                                        label-class="col-sm-3"
                                        input-col-class="col-sm-9"
                                }}

                                {{#if afFieldValueIs name=this.current.type value=1}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Text entry using keyboard. Use when question answers are unable to be captured in a small set of choices.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=2}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Instructions radio.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                    {{#afEachArrayItem name=this.current.options}}
                                        {{> afQuickField name=this.current.option
                                                template="bootstrap3-horizontal"
                                                label-class="col-sm-3 col-sm-offset-3"
                                                input-col-class="col-sm-5"
                                        }}

                                        <button class="btn autoform-remove-item" data-autoform-field="items">x</button>

                                    {{/afEachArrayItem}}
                                    <button class="btn btn-primary autoform-add-item col-sm-offset-6 col-sm-5" data-autoform-field="{{this.current.options}}">Add option</button>
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=3}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Instructions checkbox.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                    {{#afEachArrayItem name=this.current.options}}
                                        {{> afQuickField name=this.current.option
                                                template="bootstrap3-horizontal"
                                                label-class="col-sm-3 col-sm-offset-3"
                                                input-col-class="col-sm-5"
                                        }}
                                        <button class="btn btn-primary autoform-remove-item" data-autoform-field="items">x</button>
                                    {{/afEachArrayItem}}

                                    <button class="btn btn-primary autoform-add-item col-sm-offset-6 col-sm-5" data-autoform-field="{{this.current.options}}">Add option</button>
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=4}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Instructions Likert scale</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                    {{> afQuickField name=this.current.maxValue
                                            type="select-radio-inline"
                                            options=likertMaxOptions
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                    }}
                                    {{> afQuickField name=this.current.minLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Label for the Minimum Value"
                                    }}
                                    {{> afQuickField name=this.current.maxLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Label for the Maximum Value"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=5}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Instructions quick answer.</p>
                                    </div>

                                    {{#afEachArrayItem name=this.current.options}}
                                        {{> afQuickField name=this.current.option
                                                template="bootstrap3-horizontal"
                                                label-class="col-sm-3 col-sm-offset-3"
                                                input-col-class="col-sm-5"
                                        }}
                                        <button class="btn btn-primary autoform-remove-item" data-autoform-field="items">x</button>
                                    {{/afEachArrayItem}}
                                    <button class="btn btn-primary autoform-add-item col-sm-offset-6 col-sm-5" data-autoform-field="{{this.current.options}}">Add option</button>
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=6}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Instructions scale.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                    {{> afQuickField name=this.current.minValue
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Minimum Value of the Scale"
                                    }}
                                    {{> afQuickField name=this.current.maxValue
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Maximum Value of the Scale"
                                    }}
                                    {{> afQuickField name=this.current.minLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Label for the Minimum Value"
                                    }}
                                    {{> afQuickField name=this.current.maxLabel
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Label for the Maximum Value"
                                    }}
                                    {{> afQuickField name=this.current.stepSize
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Stepsize or Increments Size"
                                    }}
                                    {{> afQuickField name=this.current.scaleStart
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Place where the Scale starts"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.type value=7}}
                                    <div class="col-sm-9 col-sm-offset-3">
                                        <p class="instruction">Instructions numeric.</p>
                                    </div>

                                    {{> afQuickField name=this.current.submit
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-3 col-sm-offset-3"
                                            input-col-class="col-sm-6"
                                            placeholder="Alternative submit button text"
                                            value="Submit"
                                    }}
                                {{/if}}

                                <div class="btn-toolbar mb-3" role="toolbar">
                        </div>

                        </div>
                    </div>
                    {{/afEachArrayItem}}
                    <br>

                    <div>
                        <button class="btn btn-primary btn-md autoform-add-item" data-autoform-field="questions">Add question</button>
                        <button class="btn btn-primary btn-md pull-right" type="submit" >Next</button>
                    </div>

                {{/autoForm}}
            </div>
</template>
